# 作业 4* —— 为我们的解释器设计一个字节码虚拟机

> 注：这个作业是一个选做作业，不做硬性要求，有兴趣的同学可以尝试一下~

## 作业要求：

1. 根据下列要求实现一个简易的字节码虚拟机
2. 为下面字节码虚拟机实现一个编译器，将 JavaScript 代码编译成这个虚拟机的指令数组
3. 设计一个二进制的格式，可以将指令数组序列化成二进制文件，并且可以反序列化成指令数组



## 思考：

1. 将 JavaScript 代码编译指令数组时：
   1. 如何将一个很长的表达式拆成一步一步执行？表达式产生的中间变量该怎么处理？
   2. 如何编译控制流？是否所有的控制流语句（分支，循环）都可以用用 `branch` 和 `jump` 实现？
   3. 函数是什么？一个函数包含哪些东西？函数调用和返回过程是怎么样的？
2. 当编译 try / catch 的时：
   1. try / catch / finally 的语义是什么？
   2. 当 try / catch / finally 嵌套的时候是怎么样的？
   3. 当函数在 try / catch 内 return 的时候会发生什么？
